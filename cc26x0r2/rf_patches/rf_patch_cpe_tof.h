/******************************************************************************
*  Filename:       rf_patch_cpe_tof.h
*  Revised:        $Date: 2019-01-31 15:04:25 +0100 (to, 31 jan 2019) $
*  Revision:       $Revision: 18842 $
*
*  Description: RF core patch for supporting time-of-flight radio measurements in CC2640R2F
*
*  Copyright (c) 2015-2019, Texas Instruments Incorporated
*  All rights reserved.
*
*  Redistribution and use in source and binary forms, with or without
*  modification, are permitted provided that the following conditions are met:
*
*  1) Redistributions of source code must retain the above copyright notice,
*     this list of conditions and the following disclaimer.
*
*  2) Redistributions in binary form must reproduce the above copyright notice,
*     this list of conditions and the following disclaimer in the documentation
*     and/or other materials provided with the distribution.
*
*  3) Neither the name of the ORGANIZATION nor the names of its contributors may
*     be used to endorse or promote products derived from this software without
*     specific prior written permission.
*
*  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
*  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
*  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
*  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
*  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
*  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
*  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
*  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
*  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
*  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
*  POSSIBILITY OF SUCH DAMAGE.
*
******************************************************************************/
#ifndef _RF_PATCH_CPE_TOF_H
#define _RF_PATCH_CPE_TOF_H

//*****************************************************************************
//
// If building with a C++ compiler, make all of the definitions in this header
// have a C binding.
//
//*****************************************************************************
#ifdef __cplusplus
extern "C"
{
#endif

#include <stdint.h>
#include <string.h>

#ifndef CPE_PATCH_TYPE
#define CPE_PATCH_TYPE static const uint32_t
#endif

#ifndef SYS_PATCH_TYPE
#define SYS_PATCH_TYPE static const uint32_t
#endif

#ifndef PATCH_FUN_SPEC
#define PATCH_FUN_SPEC static inline
#endif

#ifndef _APPLY_PATCH_TAB
#define _APPLY_PATCH_TAB
#endif


CPE_PATCH_TYPE patchImageTof[] = {
   0x21000dfd,
   0x4803b510,
   0x30106800,
   0xfa6af000,
   0x47084901,
   0x210000ec,
   0x00008e13,
   0x2300b510,
   0x614348ff,
   0x6ac148ff,
   0xd0fc07c9,
   0x49fe62c3,
   0x07d26a0a,
   0x4afdd106,
   0x6892240f,
   0x40220224,
   0x60ca1d52,
   0x07d26a0a,
   0x620bd0fc,
   0x60812101,
   0x60836003,
   0x384048f4,
   0x60036081,
   0xbd106083,
   0x4bf2b510,
   0x68db685b,
   0xd00b2b00,
   0x189c0852,
   0xe0054aed,
   0x079b6b93,
   0x6a93d5fc,
   0x1c405423,
   0xdbf74288,
   0xb5f7bd10,
   0x468e2400,
   0x319121ff,
   0x468c4ae7,
   0x46234621,
   0x46254626,
   0xe0126857,
   0x6ad34ae0,
   0x68524ae2,
   0x42821bd2,
   0x2101d900,
   0x6b124ae0,
   0xd00642b2,
   0x684748dd,
   0x46604dde,
   0x4616682d,
   0x430bb2ad,
   0x4ad7d0ea,
   0x6a116a10,
   0x0fc006c0,
   0x0fc90689,
   0x29014ed4,
   0x2801d101,
   0x210fd011,
   0x020968b0,
   0x1d404008,
   0x48cd60d0,
   0x62c12100,
   0x62012101,
   0x684748cd,
   0x98026137,
   0xd00e2802,
   0x9802e013,
   0xd1032802,
   0x684048c8,
   0x61486871,
   0x20004671,
   0xf7ff9a02,
   0x2401ffa1,
   0x6870e7ea,
   0x8d802c01,
   0x1a38d027,
   0x48c260f0,
   0x0a2a6800,
   0x0a08b281,
   0xb2c91880,
   0x1889b2ea,
   0x084a0840,
   0x23ff1811,
   0x1a103301,
   0x02001a59,
   0xfc44f000,
   0x68f06170,
   0xd2014287,
   0x60f02000,
   0x88736870,
   0x4fb28d82,
   0x68f06931,
   0x1a0918d5,
   0xd20542a9,
   0x61316879,
   0x1a38e7f9,
   0xe7d530f0,
   0x21009d02,
   0xd0052d02,
   0xd1032c01,
   0x1a086931,
   0x1ac11a80,
   0x1a406930,
   0x2c0160f0,
   0x2000d002,
   0xbdfe43c0,
   0xbdfe2000,
   0x4ba4b510,
   0x2402499c,
   0x28002201,
   0x48a2d007,
   0x694861d8,
   0x61484390,
   0x43206948,
   0x489ee007,
   0x61d83812,
   0x43106948,
   0x69486148,
   0x614843a0,
   0x39404998,
   0x4b996bc8,
   0x23034018,
   0x63cb4303,
   0x63c84310,
   0xb510bd10,
   0x01129c02,
   0x3cff0224,
   0x3a103c01,
   0x1e494314,
   0x4989430c,
   0x618b610c,
   0x22024b87,
   0x605a3b40,
   0x620a2200,
   0x4a85614a,
   0x68520200,
   0x2a027992,
   0x1cc0d002,
   0xbd1060c8,
   0xe7fb1d00,
   0x49817808,
   0x47706388,
   0x6849497d,
   0x29006889,
   0x0840d004,
   0x497c1808,
   0x63887800,
   0x21034877,
   0x60013840,
   0x49746041,
   0x60082001,
   0x47706048,
   0x4605b538,
   0xffe8f7ff,
   0x2100486f,
   0x210862c1,
   0x4c6f6201,
   0x93007823,
   0x4b7468a0,
   0x0f000500,
   0xf7ff7862,
   0x2000ffb6,
   0xff90f7ff,
   0x2d026861,
   0xd1006808,
   0x462a8dc8,
   0xf7ff2101,
   0xbd38fef6,
   0x4964b5f7,
   0x20004615,
   0x4606684a,
   0x46944607,
   0x495de015,
   0x495f6ace,
   0x46626849,
   0x99001a8a,
   0xd900428a,
   0x495c2701,
   0x42846b0c,
   0x2c00d007,
   0x2001d001,
   0x2000e000,
   0xff68f7ff,
   0x433e4620,
   0x4950d0e7,
   0x61482000,
   0x6a084950,
   0x06c04e50,
   0x2d000fc0,
   0x4a4fd103,
   0x68736852,
   0x2f00615a,
   0x2800d001,
   0x2401d01d,
   0x2000462a,
   0xf7ff9901,
   0x484afea9,
   0x02236800,
   0x0a08b281,
   0x1811b2ca,
   0x1a591a10,
   0xf0000200,
   0x6170fb5b,
   0x68504a41,
   0x68716130,
   0x461f798b,
   0xd00f432f,
   0xd0152b01,
   0x220fe01b,
   0x021268b0,
   0x1d404010,
   0x483660c8,
   0x62c12100,
   0x62012101,
   0xe7e72400,
   0x2c008d8b,
   0x1ac3d002,
   0xe00733f0,
   0xe0051ac3,
   0xd1042d00,
   0x1ac38d8b,
   0x330533ff,
   0x68f360f3,
   0xd2014298,
   0x60f02000,
   0x88778d8b,
   0x68f06932,
   0x1a1219d9,
   0xd203428a,
   0x68524a27,
   0xe7f86132,
   0x2d002100,
   0x2c00d005,
   0x6931d003,
   0x1ac01a08,
   0x69301bc1,
   0x60f01a40,
   0xd0012c00,
   0xbdfe2000,
   0x43c02000,
   0xb538bdfe,
   0xf7ff4605,
   0x4817ff37,
   0x62c12100,
   0x62012108,
   0x78234c16,
   0x68a09300,
   0x05004b1b,
   0x78620f00,
   0xff05f7ff,
   0xf7ff2000,
   0x6861fedf,
   0x68082d00,
   0x8dc8d100,
   0x2101462a,
   0xff50f7ff,
   0xb530bd38,
   0x25004c09,
   0x01126225,
   0x1e493a10,
   0x6122430a,
   0x020061a3,
   0x60e01c80,
   0x21014805,
   0xe0156001,
   0x40041100,
   0x40046000,
   0x40045040,
   0x21000e5c,
   0x40043000,
   0x40045280,
   0x40045180,
   0x40044040,
   0x0001f879,
   0xfff000ff,
   0x0000aaaa,
   0x61456942,
   0x60114af9,
   0x49f86840,
   0x31403028,
   0xbd306008,
   0x4605b538,
   0xfee6f7ff,
   0x210048f4,
   0x210662c1,
   0x4cf36201,
   0x78232108,
   0x68a09300,
   0x05004bf1,
   0x78620f00,
   0xffbbf7ff,
   0x48ef49f0,
   0x200161c8,
   0xfe8af7ff,
   0x462a6860,
   0x21016800,
   0xfefef7ff,
   0x00c9bd38,
   0x0c135842,
   0x61534ae9,
   0xb29b5843,
   0x18086193,
   0x0c096841,
   0x684160d1,
   0x6111b289,
   0x0c0a6881,
   0x31c049e2,
   0x6882608a,
   0x60cab292,
   0x4ae068c1,
   0x63510c09,
   0x49dd68c0,
   0x3180b280,
   0x47706048,
   0xb089b5f0,
   0x2500b662,
   0x49da4cd4,
   0x684960e5,
   0x05122201,
   0x42914011,
   0x6060d07e,
   0x90012000,
   0x49d5204f,
   0x478800c0,
   0x68606125,
   0x290079c1,
   0x21ffd001,
   0x30203101,
   0x4acd60a1,
   0x62d17901,
   0x21207902,
   0xd1002a00,
   0x70212140,
   0x21027980,
   0xd1002800,
   0x48c92101,
   0x47807061,
   0x49be6860,
   0x79403020,
   0x61883180,
   0x478048c5,
   0x80602000,
   0x384048bd,
   0x48c46bc0,
   0x610149c2,
   0x91002100,
   0x684849b6,
   0x24003020,
   0x46267c40,
   0x46259406,
   0x90029403,
   0x2000e1f8,
   0x48bc6178,
   0x49ba4780,
   0x61482000,
   0x7ac148ba,
   0x07c97ac0,
   0x22020fc9,
   0x43014010,
   0x48b7d002,
   0xbdf0b009,
   0x210048a7,
   0x68478041,
   0x37209704,
   0x08607cf9,
   0xf0009007,
   0x2900fa19,
   0x9806d114,
   0xd01142a0,
   0x28009802,
   0x9902d04d,
   0x084907c0,
   0x91020fc0,
   0xd0022800,
   0x40487cb8,
   0x7c399002,
   0xf0009802,
   0x460dfa03,
   0x94069804,
   0x00e96b40,
   0x5a429104,
   0x4f939900,
   0xd024428a,
   0xe0009904,
   0x1d89e05d,
   0x99045a43,
   0x1d099300,
   0x99045c43,
   0x5c421c89,
   0x1cc99904,
   0x200e5c41,
   0xf9ecf000,
   0x22016878,
   0x98046b41,
   0x5a082300,
   0x04004611,
   0xf9e8f000,
   0x4780488c,
   0x78014891,
   0xd1fc2903,
   0x8f006878,
   0x487f8078,
   0x98046847,
   0x5a086b79,
   0x6a389000,
   0xd00d2800,
   0x46200041,
   0xf9c6f000,
   0xd00c2900,
   0x1c6de01b,
   0xb2ed7c38,
   0xd8bb42a8,
   0xe7b92500,
   0x69b84973,
   0x4621780a,
   0x2c00e033,
   0x4638d00b,
   0x7fc13020,
   0xd01807ca,
   0x77822201,
   0x77c14391,
   0x02d04976,
   0x69b86088,
   0x6a389005,
   0x00419004,
   0xf0004620,
   0x9804f9a1,
   0xd1134281,
   0xd00f2c00,
   0x30204638,
   0x078a7fc1,
   0x4871d401,
   0x2202e76e,
   0x22fd7782,
   0x77c14011,
   0x49682001,
   0x608802c0,
   0x900569f8,
   0x6a394620,
   0xf986f000,
   0x78024858,
   0xf7ff9805,
   0x2c00fede,
   0x4855d104,
   0x79806840,
   0xd00c2802,
   0x90019807,
   0x68404851,
   0x28017980,
   0x4f4fd007,
   0xd0552800,
   0xd07e2802,
   0x2402e075,
   0x4620e12c,
   0xfea4f7ff,
   0x4684b280,
   0x30404847,
   0x4a476983,
   0x69076850,
   0x00c19801,
   0x543b1d48,
   0x69036850,
   0x541d1d08,
   0x28004660,
   0x6852d00e,
   0x43c02000,
   0x2c006912,
   0xd1735050,
   0x1ca4e002,
   0xe050b2a4,
   0x1c409803,
   0xe04c9003,
   0x20276857,
   0x28015dc0,
   0x6950d001,
   0x4839e014,
   0x6bc33040,
   0x0f1b071b,
   0x6bc06153,
   0x0e800580,
   0xdd012b07,
   0x61533b10,
   0xdd01281f,
   0xb2003840,
   0x18c00100,
   0x61500100,
   0x4b3b30ff,
   0x42983001,
   0x2000d301,
   0x482b6150,
   0x6b803040,
   0x02006952,
   0x693a1880,
   0xe7cc5050,
   0xf7ff4620,
   0xb281fe02,
   0x3040481f,
   0x481f6983,
   0x69076840,
   0x00c09801,
   0x54bb1d42,
   0x1d034a1b,
   0x29006852,
   0x54d56912,
   0x4a18d024,
   0x68522100,
   0x691243c9,
   0x50112c00,
   0x1c76d0b2,
   0x2c01b2b6,
   0xf7ffd8ab,
   0x4811fc11,
   0x8d386847,
   0xd30542b0,
   0x99038d7a,
   0xe041e000,
   0xd27e428a,
   0x4288491d,
   0x8d78d102,
   0xd0784288,
   0x48132101,
   0x60810449,
   0xe6b94819,
   0x21004a05,
   0x69126852,
   0xe78c5011,
   0x0000e049,
   0x40043040,
   0x40046000,
   0x21000e5c,
   0x0000aaaa,
   0x0001f879,
   0x40044040,
   0x40045100,
   0x40045280,
   0x40091040,
   0x00003fd1,
   0x00007b73,
   0x000046ab,
   0x0000c210,
   0x40041100,
   0x00000c2d,
   0x2100010c,
   0x04040003,
   0x2100028c,
   0x04060003,
   0x00000201,
   0x0000ffff,
   0x04030003,
   0xf7ff4620,
   0xb282fce3,
   0x46946878,
   0x98016903,
   0x00c04639,
   0x549d1d02,
   0x69934a3d,
   0x6917687a,
   0x54bb1d42,
   0x2a004662,
   0x6849d00a,
   0x43d22200,
   0x2c026909,
   0xd800500a,
   0x1c76e744,
   0xe73eb2b6,
   0x68494934,
   0x3120468c,
   0x290179c9,
   0x4932d126,
   0x07136bca,
   0x0f1b4a30,
   0x68d73ac0,
   0x073f6bc9,
   0x05890f3f,
   0x0e8968d2,
   0x0e920592,
   0xdd002b07,
   0x2f073b10,
   0x3f10dd00,
   0xdd03291f,
   0xe01fe000,
   0xb2093940,
   0xdd012a1f,
   0xb2123a40,
   0x18c90109,
   0x011219c9,
   0x010a1889,
   0x614a491e,
   0x4b1f491d,
   0x32ff694a,
   0x429a3201,
   0x2200d301,
   0x4a1a614a,
   0x69496b92,
   0x18520212,
   0x69094661,
   0xe6fe500a,
   0x98018fb9,
   0xf848f000,
   0xd1072900,
   0x28009801,
   0x8778d004,
   0x48122101,
   0x608103c9,
   0x68784f0d,
   0x42a08880,
   0xe600d900,
   0x480d2101,
   0x60810409,
   0x68404638,
   0x8d021e49,
   0xd103428a,
   0x42888d40,
   0xe5e7d100,
   0x98014903,
   0x87486849,
   0xe5fd2000,
   0x40046040,
   0x21000e5c,
   0x40045140,
   0x00000201,
   0x40041100,
   0x49068800,
   0xd1064288,
   0x21004805,
   0x49058501,
   0x20016241,
   0x20824770,
   0x00004770,
   0x00006801,
   0x210000ec,
   0x2100044d,
   0x4801b403,
   0xbd019001,
   0x00007d3b,
   0x4801b403,
   0xbd019001,
   0x00007d1f,
   0x4801b403,
   0xbd019001,
   0x00007467,
   0x4801b403,
   0xbd019001,
   0x000044a3,
   0x0001f879,
   0x0001f867,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
   0x00000000,
};
#define _NWORD_PATCHIMAGE_TOF 651

#define _NWORD_PATCHSYS_TOF 0



#ifndef _TOF_SYSRAM_START
#define _TOF_SYSRAM_START 0x20000000
#endif

#ifndef _TOF_CPERAM_START
#define _TOF_CPERAM_START 0x21000000
#endif

#define _TOF_SYS_PATCH_FIXED_ADDR 0x20000000

#define _TOF_PARSER_PATCH_TAB_OFFSET 0x0350
#define _TOF_PATCH_TAB_OFFSET 0x0358
#define _TOF_IRQPATCH_OFFSET 0x03E8
#define _TOF_PATCH_VEC_OFFSET 0x0448

PATCH_FUN_SPEC void enterTofCpePatch(void)
{
#if (_NWORD_PATCHIMAGE_TOF > 0)
   uint32_t *pPatchVec = (uint32_t *) (_TOF_CPERAM_START + _TOF_PATCH_VEC_OFFSET);

   memcpy(pPatchVec, patchImageTof, sizeof(patchImageTof));
#endif
}

PATCH_FUN_SPEC void enterTofSysPatch(void)
{
}

PATCH_FUN_SPEC void configureTofPatch(void)
{
   uint8_t *pParserPatchTab = (uint8_t *) (_TOF_CPERAM_START + _TOF_PARSER_PATCH_TAB_OFFSET);


   pParserPatchTab[6] = 0;
}

PATCH_FUN_SPEC void applyTofPatch(void)
{
   enterTofSysPatch();
   enterTofCpePatch();
   configureTofPatch();
}

PATCH_FUN_SPEC void refreshTofPatch(void)
{
   enterTofCpePatch();
   configureTofPatch();
}

PATCH_FUN_SPEC void rf_patch_cpe_tof(void)
{
   applyTofPatch();
}


//*****************************************************************************
//
// Mark the end of the C bindings section for C++ compilers.
//
//*****************************************************************************
#ifdef __cplusplus
}
#endif

#endif //  _RF_PATCH_CPE_TOF_H

